mime inode/directory, X = cd "$1" && terminal
mime inode/directory    = cd "$1" && "$SHELL"

mime ^text, label edit = visual "$@"
mime ^text, label page = pager "$@"

match ^https?, flag f = browser "$@"
ext   x?html?, flag f = browser "$@"

ext 1 = man "$1"

ext  xcf,        label edit, has gimp,     X, flag f = gimp "$@"
mime ^image/svg, label edit, has inkscape, X, flag f = inkscape "$@"
mime ^image/gif, label play, has gifview,  X, flag f = gifview -a "$@"
mime ^image,     label view, has feh,      X, flag f = feh "$@"
mime ^image,     label edit, has gimp,     X, flag f = gimp "$@"
mime ^image,     label edit, has mypaint,  X, flag f = mypaint "$@"
mime ^image,     label edit, has vim                 = vim "$@"
mime ^image,     label set,  has setbg,    X,        = setbg "$1"

ext m3u|pls, label play, has mpv, X, flag f = mpv "$@"
ext m3u|pls, label play, has mpv, !X, terminal = mpv "$@"

mime ^audio|video, label play, has mpv, X, flag f = mpv "$@"
mime ^audio|video, label play, has mpv, !X, terminal = mpv "$@"

ext pdf|epub|cbz|cbr|djvu, has zathura, X, flag f = zathura "$@"

ext docx?, has catdoc, terminal = catdoc "$@" | "$PAGER"

ext                        sxc|xlsx?|xlt|xlw|gnm|gnumeric, has gnumeric,    X, flag f = gnumeric "$@"
ext pptx?|od[dfgpst]|docx?|sxc|xlsx?|xlt|xlw|gnm|gnumeric, has libreoffice, X, flag f = libreoffice "$@"

ext smd,     label play, has dgen,  X = dgen "$@"
ext nes,     label play, has fceux, X = fceux "$@"
ext s[wmf]c, label play, has zsnes, X = zsnes "$@"

ext tex, has latex,    label compile = latex "$@"
ext dvi, has dvipdfmx, label compile = dvipdfmx "$@"

ext 7z, has 7z = 7z -p l "$@" | "$PAGER"

ext 7z|ace|ar|arc|bz2?|cab|cpio|cpt|deb|dgc|dmg|gz|iso|jar|msi|pkg|rar|shar|tar|tgz|xar|xpi|xz|zip, label list,   has als     = als "$@" | "$PAGER"
ext 7z|ace|ar|arc|bz2?|cab|cpio|cpt|deb|dgc|dmg|gz|iso|jar|msi|pkg|rar|shar|tar|tgz|xar|xpi|xz|zip, label unpack, has aunpack = aunpack "$@" | "$PAGER"

ext tar|gz|bz2|xz, has tar = tar vvtf "$1" | "$PAGER"
ext tar|gz|bz2|xz, has tar = for file in "$@"; do tar vvxf "$file"; done

ext bz2, has bzip2 = for file in "$@"; do bzip2 -dk "$file"; done

ext zip, has unzip = unzip -l "$1" | "$PAGER"
ext zip, has unzip = for file in "$@"; do unzip -d "${file%.*}" "$file"; done

ext ace, has unace = unace l "$1" | "$PAGER"
ext ace, has unace = for file in "$@"; do unace e "$file"; done

ext rar, has unrar = unrar l "$1" | "$PAGER"
ext rar, has unrar = for file in "$@"; do unrar x "$file"; done

mime ^font, has fontforge, X, flag f = fontforge "$@"

mime ^ranger/x-terminal-emulator = terminal -e "$@"

label open, has xdg-open = xdg-open "$@"
label open, has open     = open "$@"

            !mime ^text, !ext xml|json|csv|tex|py|pl|rb|js|sh|php = ask
label edit, !mime ^text, !ext xml|json|csv|tex|py|pl|rb|js|sh|php = visual "$@"
label page, !mime ^text, !ext xml|json|csv|tex|py|pl|rb|js|sh|php = pager "$@"

# execute a file as program/script.
mime application/x-executable = "$1"

# move the file to trash using trash-cli.
label trash, has trash-put = trash-put "$@"
