#!/usr/bin/env sh

# Enable autologin for a virtual terminal.
# Usage: [tty=1] enable-autologin [user]

set -e

user=${1:-$USER}

ttyd=/etc/systemd/system/getty@tty${tty:-1}.service.d

sudo mkdir -p "$ttyd"

echo "[Service]
ExecStart=
ExecStart=-/usr/bin/agetty --autologin $user --noclear %I \$TERM
" | sudo tee "$ttyd"/override.conf
