#!/usr/bin/env sh

# Install and configure a minecraft server environment.
# Usage: install-minecraft-server [version]

set -e

version=${1:-`minecraft-version-latest`}

dir=${dir:-$HOME/.minecraft-server}

mkdir -p "$dir"; cd "$dir"

jar=`get-minecraft-server "$version"`
ln -sfv "$jar" minecraft.jar
ln -sfv minecraft.jar server.jar

echo "eula=true" >eula.txt
echo stop | java -jar minecraft.jar nogui

script="#!/usr/bin/env sh\n\nexec java -Xmx4G -jar server.jar nogui"
echo -e "$script" >server
chmod +x server

echo "Run $dir/server to start" >&2
