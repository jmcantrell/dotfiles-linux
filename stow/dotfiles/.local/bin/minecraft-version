#!/usr/bin/env bash

# Get the current version of a minecraft client profile.

set -e

dir=$HOME/.minecraft
profiles=$dir/launcher_profiles.json

profile=${1:-$(jq -r .selectedProfile "$profiles")}

# get the version of the selected profile
version=$(jq -r ".profiles[\"${profile:-default}\"].lastVersionId" "$profiles")

# if not explicitly set, use the latest version
if ! test "$version" || test "$version" = null; then
    version=$(minecraft-version-latest)
fi

# strip off any variant version info
echo "${version%%-*}"
