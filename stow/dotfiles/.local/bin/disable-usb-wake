#!/usr/bin/env bash

# Disable the ability for USB devices to wake up the system.

wakeup="/proc/acpi/wakeup"

devices=$(
	grep -Ev '^[[:space:]]' "$wakeup" |
	grep -E '^(EHC|XHC)' | cut -d' ' -f1 | tr -d '[:space:]'
)

{
	echo "# Path Mode UID GID Age Argument"
	echo "w $wakeup - - - - $(printf "%s" "${devices[@]}")"
} | column -t | sudo tee /etc/tmpfiles.d/disable-usb-wake.conf
