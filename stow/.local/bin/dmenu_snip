#!/usr/bin/env bash

me=${0##*/}
usage="Interact with a snippet using dmenu.
Usage: $me [-h] [-e|c|s|t]"

unset OPTIND
while getopts ":hecst" option; do
	case $option in
		e|c|s|t) snip_option=$option ;;&
		e) action="edit" ;;
		c) action="copy" ;;
		s) action="save" ;;
		t) action="type" ;;
		h) echo "$usage" >&2; exit 0 ;;
		*) echo "$usage" >&2; exit 1 ;;
	esac
done && shift $((OPTIND - 1))

name=$(snip -l | dmenu -p "$action snippet")

if [[ ! $name ]]; then
	echo "ERROR: no snippet selected" >&2
	exit 1
fi

snip -"$snip_option" "$name"
