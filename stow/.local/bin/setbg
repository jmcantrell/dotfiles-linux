#!/usr/bin/env bash

# Set the desktop background to the given image.
# If no image is given, the previous one will be restored.
# Usage: setbg [IMAGE_FILE]

set -eu

image=${1:-}

background=${XDG_CONFIG_HOME:-$HOME/.config}/background.png

if [[ -f $image ]]; then
    ln -sfvr "$image" "$background"
fi

if [[ -v SWAYSOCK ]]; then
    exec swaymsg output "*" bg "$background" stretch '#000000'
fi
