#!/usr/bin/env bash

# Add and edit vimb bookmarks.

set -e

bookmarks=${XDG_CONFIG_HOME:-$HOME/.config}/vimb/bookmark

mkdir -p "$(dirname "$bookmarks")"

(( $# == 0 )) && "$EDITOR" "$bookmarks"

url=${1:?missing url}
title=$2
tags=$3

sed -i "/^$url\b/d" "$bookmarks"
echo -e "$url${title:+\t$title${tags:+\t$tags}}" >>"$bookmarks"
