#!/usr/bin/env bash

# Add and edit vimb bookmarks.

set -eu

bookmarks=${XDG_CONFIG_HOME:-$HOME/.config}/vimb/bookmark

mkdir -p "$(dirname "$bookmarks")"

if (($# == 0)); then
    exec "$EDITOR" "$bookmarks"
fi

url=${1:?Missing URL}
title=${2:-}
tags=${3:-}

sed -i "/^$url\b/d" "$bookmarks"
echo -e "$url${title:+\t$title${tags:+\t$tags}}" >>"$bookmarks"
