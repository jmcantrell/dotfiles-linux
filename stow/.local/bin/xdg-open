#!/usr/bin/env bash

set -eu

files=()

for arg in "$@"; do
    if [[ $arg == file://* ]]; then
        # Since we're masquerading as xdg-open, we need to handle encoded file URLs
        # like: file:///path/to/file+with+spaces.txt
        files+=("$(urldecode "${arg#file://}")")
    else
        # Other URLs (http, etc.) should be handled directly by rifle.
        files+=("$arg")
    fi
done

exec rifle "${files[@]}"
