#!/usr/bin/env bash

# Run qutebrowser in another session, but with the user's configuration.

set -eu

profiles_dir=${XDG_DATA_HOME:-$HOME/.local/share}/qutebrowser/profiles

profile_name=${1:?Missing profile name}
shift

profile_dir=$profiles_dir/$profile_name

qutebrowser-spawn-basedir "$profile_dir"

qutebrowser \
    --basedir "$profile_dir" \
    --desktop-file-name "org.qutebrowser.qutebrowser.$profile_name" \
    "$@"
