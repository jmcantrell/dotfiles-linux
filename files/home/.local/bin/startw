#!/usr/bin/env bash

# Start a wayland window manager with logging after loading its environment.

set -eu
shopt -s nullglob

for file in ~/.wprofile.d/*; do
    [[ -f $file ]] || continue
    . "$file" || echo "$0: line $LINENO: unable to load file: $file" >&2
done
unset file

export XDG_CURRENT_DESKTOP=sway
exec "$XDG_CURRENT_DESKTOP" 2>&1 | logger -t "$XDG_CURRENT_DESKTOP"
