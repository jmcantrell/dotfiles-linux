#!/usr/bin/env bash

# Run qutebrowser using a given base directory.

set -euo pipefail

if [[ ! -v 1 ]]; then
    printf "The first argument must be the base directory\n" >&2
    exit 1
fi

directory=$1

shift

qutebrowser-spawn-basedir "$directory"

profile_name=${QUTEBROWSER_PROFILE_NAME:-${directory##*/}}

exec qutebrowser \
    --basedir "$directory" \
    --desktop-file-name "org.qutebrowser.qutebrowser.$profile_name" \
    "$@"
