#!/usr/bin/env bash

set -euo pipefail

options=()

if [[ -v SWAYSOCK ]]; then
    options+=(-w "$(swaymsg -t get_tree | jq '.. | select(.visible? and .focused?).rect.width')")
fi

exec /usr/bin/img2sixel "${options[@]}" "$@"
