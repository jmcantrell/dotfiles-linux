#!/usr/bin/env bash

# Prepare a skeleton base directory inheriting from the user's configuration.

set -eu

config_dir=${XDG_CONFIG_HOME:-$HOME/.config}/qutebrowser
data_dir=${XDG_DATA_HOME:-$HOME/.local/share}/qutebrowser

base_dir=${1:?Missing directory}

mkdir -p "$base_dir"
ln -svfrn "$config_dir" "$base_dir"/config

mkdir -p "$base_dir"/data
for file in "$data_dir"/{adblock-cache.dat,blocked-hosts}; do
    touch "$file"
    ln -svfrn "$file" "$base_dir/data/${file##*/}"
done
